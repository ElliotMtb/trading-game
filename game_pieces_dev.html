<html>
<script src= "kinetic-v4.5.5.min.js" type="text/javascript"></script>
<script src="jquery-1.10.2.min.js" type="text/javascript"></script>

<script>

$(document).ready(function(){
var app = {}; // create namespace for our app

app.colors = ['blue', 'orange', 'green', 'brown', 'yellow', 'red'];

	app.kineticLayer = new Kinetic.Layer();
	app.Stage = new Kinetic.Stage({
		container: 'gameBoardContainer',
		width: 900,
		height: 900
	});
	
	var i;
	
	
	for(i = 0; i < 100; i++)
	{
		var randomX = Math.floor((Math.random() * 500) + 1);
		var randomY = Math.floor((Math.random() * 500) + 1);
		
		var randomColor = Math.floor((Math.random() * 6));
		
		makeCity(randomX,randomY, 20, app.colors[randomColor], app.kineticLayer);
	}
	
	
	var triangle = new Kinetic.RegularPolygon({
        x: 350,
        y: 350,
        sides: 3,
        radius: 100,
        fill: 'cyan',
        //fillPatternImage: theCenter.image,
	    //fillPatternOffset: [-78, 70],
	    //hexType: theCenter.type,
        stroke: 'black',
        strokeWidth: 1,
        //id: centerGuid
      });
	  
	var triangle2 = new Kinetic.Line({
        points: [73, 160, 340, 23, 500, 109,73, 160],
        fill: '#00D2FF',
        stroke: 'black',
        strokeWidth: 5,
        closed: true
      });
	  
	var centerTriX = (73 + 340 + 500)/3;
	var centerTriY = (160 + 23 + 109)/3;
	
	var circle = new Kinetic.Circle({
		x: centerTriX,
		y: centerTriY,
		radius: 3,
		fill: 'black',
        stroke: 'black',
        strokeWidth: 1
	});

	
	var newSettlement = makeSettlement(500,200,20,'red',app.kineticLayer);

	var newCity = makeCity(500,250,20,'blue',app.kineticLayer);

	app.kineticLayer.add(triangle);
	app.kineticLayer.add(triangle2);
	app.kineticLayer.add(circle);
	
	app.Stage.add(app.kineticLayer);
	app.kineticLayer.draw();
});

function makeSettlement(x,y,r,color,layer){
	
	var settlement = {};
	
	var frontRadius = r;
	var frontY = y;
	
	settlement.front = makeBlock(x,frontY,frontRadius,color);

	  var roofY = frontY - frontRadius/(Math.sqrt(2));
	  var roofRadius = frontRadius/(Math.sqrt(2));
	  
	  settlement.front.rotateDeg(45);
	  
	  settlement.roof = makeBlock(x,roofY,roofRadius,color);
	  
	  layer.add(settlement.roof);
	  layer.add(settlement.front);
}
function makeCity(x,y,r,color,kineticLayer){
	
	var city = {};
	
	// Center the city in the x direction
	var xOffset = x + r/Math.sqrt(2);
	
	city.center = makeBlock(xOffset,y,r,color);
	
	city.settlement = makeSettlement(xOffset,y-(.5*r),r,color,kineticLayer);

	var sideRadius = r;
	var sideY = y;
	var sideX = xOffset - 2*(r/Math.sqrt(2));
	
	city.side = makeBlock(sideX,sideY,sideRadius,color);
	  
	city.center.rotateDeg(45);
	city.side.rotateDeg(45);
	
	kineticLayer.add(city.center);
	kineticLayer.add(city.side);
}

function makeBlock(x,y,r,color){

	var block = new Kinetic.RegularPolygon({
        x: x,
        y: y,
        sides: 4,
        radius: r,
        fill: color,
        //fillPatternImage: theCenter.image,
	    //fillPatternOffset: [-78, 70],
	    //hexType: theCenter.type,
        stroke: 'black',
        strokeWidth: 1,
        //id: centerGuid
      });
	  
	return block;
}

</script>

<body>
<div id="gameBoardContainer" height="1200" width="1200">
</div>	
</body>


</html>
